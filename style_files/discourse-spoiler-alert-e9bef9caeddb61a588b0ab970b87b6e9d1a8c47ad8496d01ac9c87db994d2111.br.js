!function(i){function e(e){var t;i("div.lazyYT",e).each(function(){i(this).replaceWith("<p>https://youtube.com/watch?v="+i(this).data("youtube-id")+"</p>")}),(t=e).addClass("spoiler-blurred"),i("a",t).addClass("no-track-link")}i.fn.spoil=function(){return this.each(function(){var t;(t=i(this)).data("spoiler-state","blurred"),e(t),t.on("click",function(e){"blurred"===t.data("spoiler-state")?(t.data("spoiler-state","revealed"),t.removeClass("spoiler-blurred"),e.preventDefault()):(t.data("spoiler-state","blurred"),t.addClass("spoiler-blurred"))})})}}(jQuery),define("discourse/plugins/discourse-spoiler-alert/initializers/spoiler-alert",["exports","discourse/lib/plugin-api","discourse/lib/to-markdown","discourse/controllers/composer"],function(e,t,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e};function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){$(".spoiler",e).removeClass("spoiler").addClass("spoiled").spoil()}function l(e){e.decorateCooked(o,{id:"spoiler-alert"}),e.addToolbarPopupMenuOptionsCallback(function(){return{action:"insertSpoiler",icon:"magic",label:"spoiler.title"}}),i.default.reopen({actions:{insertSpoiler:function(){this.get("toolbarEvent").applySurround("[spoiler]","[/spoiler]","spoiler_text",{multiline:!1,useBlockMode:!0})}}}),s.Tag&&(s.Tag.prototype.decorate=function(e){return"spoiled"===this.element.attributes.class&&(this.prefix="[spoiler]",this.suffix="[/spoiler]"),(this.prefix||this.suffix)&&(e=[this.prefix,e,this.suffix].join("")),this.inline&&(e=" "+e+" "),e},s.Tag.block=function(t,i,r){return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,s.Tag),n(o,[{key:"decorate",value:function(e){var t=this.element.attributes,i=this.element.parent;return"p"===this.name&&i&&"li"===i.name&&(this.gap=""),"div"===this.name&&"spoiled"===t.class&&(this.prefix="[spoiler]",this.suffix="[/spoiler]",e=e.trim()),""+this.gap+this.prefix+e+this.suffix+this.gap}}]),o;function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,i,r));return e.gap="\n\n",e}})}e.default={name:"apply-spoilers",initialize:function(e){e.lookup("site-settings:main").spoiler_enabled&&(0,t.withPluginApi)("0.5",l)}}}),define("discourse/plugins/discourse-spoiler-alert/lib/discourse-markdown/spoiler-alert",["exports","pretty-text/pretty-text"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setup=function(e){e.whiteList(["span.spoiler","div.spoiler"]),e.markdownIt?function(e){e.registerOptions(function(e,t){e.features["spoiler-alert"]=!!t.spoiler_enabled}),e.registerPlugin(function(e){e.inline.bbcode.ruler.push("spoiler",{tag:"spoiler",wrap:"span.spoiler"}),e.block.bbcode.ruler.push("spoiler",{tag:"spoiler",wrap:"div.spoiler"})})}(e):e.addPreProcessor(o)},(0,t.registerOption)(function(e,t){t.features["spoiler-alert"]=!!e.spoiler_enabled});var r=/\n|<img|!\[[^\]]*\][(\[]/;function i(e,t){var i=r.test(t)?"div":"span";return"<"+i+" class='spoiler'>"+t+"</"+i+">"}function o(e){for(e=e||"";e!==(e=e.replace(/\[spoiler\]((?:(?!\[spoiler\]|\[\/spoiler\])[\S\s])*)\[\/spoiler\]/gi,i)););return e}});
//# sourceMappingURL=https://sjc3.discourse-cdn.com/business7/assets/plugins/discourse-spoiler-alert-e9bef9caeddb61a588b0ab970b87b6e9d1a8c47ad8496d01ac9c87db994d2111.js.map
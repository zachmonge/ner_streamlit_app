define("discourse/plugins/discourse-adplugin/initializers/initialize-ad-plugin",["exports","discourse/lib/plugin-api"],function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"initialize-ad-plugin",initialize:function(e){(0,s.withPluginApi)("0.1",function(e){e.decorateWidget("post:after",function(e){return e.canConnectComponent?e.attrs.cloaked?void 0:e.connect({component:"post-bottom-ad",context:"model"}):e.connect({templateName:"connectors/post-bottom/discourse-adplugin",context:"model"})})});var t=e.lookup("message-bus:main");t&&t.subscribe("/site/house-creatives",function(e){Discourse.Site.currentProp("house_creatives",e)})}}}),Ember.TEMPLATES["javascripts/components/amazon-product-links"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["showAd"]]],null,{"statements":[[4,"if",[[24,["site","mobileView"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","amazon-product-links-label"],[11,"style",[22,"adTitleStyleMobile"]],[8],[7,"h2",true],[8],[1,[28,"i18n",["adplugin.advertisement_label"],null],false],[9],[9],[0,"\\n\\t\\t"],[7,"iframe",true],[11,"style",[22,"adWrapperStyleMobile"]],[10,"marginwidth","0"],[10,"marginheight","0"],[10,"scrolling","no"],[10,"frameborder","0"],[11,"src",[22,"userInputMobile"]],[8],[0,"\\n\\t\\t"],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div",true],[10,"class","amazon-product-links-label"],[8],[7,"h2",true],[8],[1,[28,"i18n",["adplugin.advertisement_label"],null],false],[9],[9],[0,"\\n\\t\\t"],[7,"div",true],[10,"class","container"],[10,"align","center"],[8],[0,"\\n\\t\\t\\t"],[7,"iframe",true],[11,"style",[22,"adWrapperStyle"]],[10,"marginwidth","0"],[10,"marginheight","0"],[10,"scrolling","no"],[10,"frameborder","0"],[11,"src",[22,"userInput"]],[8],[0,"\\n\\t\\t\\t"],[9],[0,"\\n\\t\\t"],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/amazon-product-links"}}),Ember.TEMPLATES["javascripts/components/google-adsense"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["showAd"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","google-adsense-label"],[8],[7,"h2",true],[8],[1,[28,"i18n",["adplugin.advertisement_label"],null],false],[9],[9],[0,"\\n  "],[7,"div",true],[10,"class","google-adsense-content"],[11,"style",[22,"adWrapperStyle"]],[8],[0,"\\n    "],[7,"ins",true],[10,"class","adsbygoogle"],[11,"style",[22,"adInsStyle"]],[11,"data-ad-client",[29,["ca-pub-",[22,"publisher_id"]]]],[11,"data-ad-slot",[22,"ad_code"]],[11,"data-ad-format",[22,"autoAdFormat"]],[8],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/google-adsense"}}),Ember.TEMPLATES["javascripts/components/google-dfp-ad"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["showAd"]]],null,{"statements":[[4,"if",[[24,["site","mobileView"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","google-dfp-ad-label"],[11,"style",[22,"adTitleStyleMobile"]],[8],[7,"h2",true],[8],[1,[28,"i18n",["adplugin.advertisement_label"],null],false],[9],[9],[0,"\\n    "],[7,"div",true],[11,"id",[22,"divId"]],[11,"style",[22,"adWrapperStyle"]],[10,"class","dfp-ad-unit"],[10,"align","center"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div",true],[10,"class","google-dfp-ad-label"],[8],[7,"h2",true],[8],[1,[28,"i18n",["adplugin.advertisement_label"],null],false],[9],[9],[0,"\\n    "],[7,"div",true],[11,"id",[22,"divId"]],[11,"style",[22,"adWrapperStyle"]],[10,"class","dfp-ad-unit"],[10,"align","center"],[8],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/google-dfp-ad"}}),Ember.TEMPLATES["javascripts/components/house-ads-list-setting"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"label",true],[11,"for",[29,[[22,"name"]]]],[8],[1,[22,"title"],false],[9],[0,"\\n"],[1,[28,"house-ads-chooser",null,[["settingValue","choices","onChange"],[[24,["adValue"]],[24,["adNames"]],[28,"action",[[23,0,[]],[28,"mut",[[24,["adValue"]]],null]],null]]]],false],[0,"\\n"],[7,"div",true],[10,"class","setting-controls"],[8],[0,"\\n"],[4,"if",[[24,["changed"]]],null,{"statements":[[0,"    "],[1,[28,"d-button",null,[["class","action","icon"],["ok",[28,"action",[[23,0,[]],"save"],null],"check"]]],false],[0,"\\n    "],[1,[28,"d-button",null,[["class","action","icon"],["cancel",[28,"action",[[23,0,[]],"cancel"],null],"times"]]],false],[0,"\\n"]],"parameters":[]},null],[9],[0,"\\n"],[7,"p",true],[10,"class","help"],[8],[1,[22,"help"],false],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/house-ads-list-setting"}}),Ember.TEMPLATES["javascripts/components/ad-slot"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["adComponent"],"statements":[[4,"each",[[24,["adComponents"]]],null,{"statements":[[0,"  "],[1,[28,"component",[[23,1,[]]],[["placement","refreshOnChange","category","listLoading","postNumber"],[[24,["placement"]],[24,["refreshOnChange"]],[24,["category"]],[24,["listLoading"]],[24,["postNumber"]]]]],false],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/ad-slot"}}),Ember.TEMPLATES["javascripts/components/carbonads-ad"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["showAd"]]],null,{"statements":[[0,"  "],[7,"script",true],[11,"src",[22,"url"]],[10,"id","_carbonads_js"],[10,"async",""],[10,"type","text/javascript"],[8],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/carbonads-ad"}}),Ember.TEMPLATES["javascripts/components/house-ad"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["showAd"]]],null,{"statements":[[0,"  "],[1,[28,"html-safe",[[24,["adHtml"]]],null],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/house-ad"}}),Ember.TEMPLATES["javascripts/components/adbutler-ad"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["showAd"]]],null,{"statements":[[7,"div",true],[11,"id",[22,"divId"]],[11,"class",[22,"className"]],[8],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/adbutler-ad"}}),Ember.TEMPLATES["javascripts/components/post-bottom-ad"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"ad-slot",null,[["placement","category","postNumber"],["post-bottom",[24,["model","topic","category","slug"]],[24,["model","post_number"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/post-bottom-ad"}}),Ember.TEMPLATES["javascripts/components/house-ads-setting"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"label",true],[11,"for",[29,[[22,"name"]]]],[8],[1,[22,"title"],false],[9],[0,"\\n"],[1,[28,"text-field",null,[["value","classNames"],[[24,["adValue"]],"house-ads-text-input"]]],false],[0,"\\n"],[7,"div",true],[10,"class","setting-controls"],[8],[0,"\\n"],[4,"if",[[24,["changed"]]],null,{"statements":[[0,"    "],[1,[28,"d-button",null,[["class","action","icon"],["ok",[28,"action",[[23,0,[]],"save"],null],"check"]]],false],[0,"\\n    "],[1,[28,"d-button",null,[["class","action","icon"],["cancel",[28,"action",[[23,0,[]],"cancel"],null],"times"]]],false],[0,"\\n"]],"parameters":[]},null],[9],[0,"\\n"],[7,"p",true],[10,"class","help"],[8],[1,[22,"help"],false],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/house-ads-setting"}}),Ember.TEMPLATES["javascripts/connectors/discovery-list-container-top/discourse-adplugin"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"ad-slot",null,[["placement","refreshOnChange","category","listLoading"],["topic-list-top",[24,["listLoading"]],[24,["category","slug"]],[24,["listLoading"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/connectors/discovery-list-container-top/discourse-adplugin"}}),Ember.TEMPLATES["javascripts/connectors/topic-above-suggested/discourse-adplugin"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"ad-slot",null,[["placement","refreshOnChange","category"],["topic-above-suggested",[24,["model","id"]],[24,["model","category","slug"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/connectors/topic-above-suggested/discourse-adplugin"}}),Ember.TEMPLATES["javascripts/connectors/post-bottom/discourse-adplugin"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"post-bottom-ad",null,[["model"],[[23,0,[]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/connectors/post-bottom/discourse-adplugin"}}),Ember.TEMPLATES["javascripts/connectors/topic-above-post-stream/discourse-adplugin"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"ad-slot",null,[["placement","refreshOnChange","category"],["topic-above-post-stream",[24,["model","id"]],[24,["model","category","slug"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/connectors/topic-above-post-stream/discourse-adplugin"}}),Ember.TEMPLATES["javascripts/admin/plugins-house-ads"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["ad"],"statements":[[7,"div",true],[10,"class","adplugin-mgmt"],[8],[0,"\\n  "],[7,"h1",true],[8],[1,[28,"i18n",["admin.adplugin.house_ads.title"],null],false],[9],[0,"\\n"],[4,"if",[[24,["model","length"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","content-list"],[8],[0,"\\n      "],[7,"div",true],[10,"class","house-ads-actions"],[8],[0,"\\n"],[4,"link-to",null,[["class","route","model"],["btn btn-primary","adminPlugins.houseAds.show","new"]],{"statements":[[0,"          "],[1,[28,"d-icon",["plus"],null],false],[0,"\\n          "],[7,"span",true],[8],[1,[28,"i18n",["admin.adplugin.house_ads.new"],null],false],[9],[0,"\\n"]],"parameters":[]},null],[4,"link-to",null,[["class","route"],["btn btn-default","adminPlugins.houseAds.index"]],{"statements":[[0,"          "],[1,[28,"d-icon",["cog"],null],false],[0,"\\n          "],[7,"span",true],[8],[1,[28,"i18n",["admin.adplugin.house_ads.settings"],null],false],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[9],[0,"\\n      "],[7,"ul",true],[10,"class","house-ads-list"],[8],[0,"\\n"],[4,"each",[[24,["model"]]],null,{"statements":[[0,"          "],[7,"li",true],[10,"class","house-ads-list-item"],[8],[0,"\\n"],[4,"link-to",null,[["route","model"],["adminPlugins.houseAds.show",[23,1,["id"]]]],{"statements":[[0,"              "],[1,[23,1,["name"]],false],[0,"\\n"]],"parameters":[]},null],[0,"          "],[9],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[0,"  "],[1,[22,"outlet"],false],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/admin/plugins-house-ads"}}),Ember.TEMPLATES["javascripts/admin/plugins-house-ads-show"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-section",null,[["class"],["edit-house-ad content-body"]],{"statements":[[0,"  "],[7,"h1",true],[8],[1,[28,"text-field",null,[["class","value"],["house-ad-name",[24,["buffered","name"]]]]],false],[9],[0,"\\n  "],[7,"div",true],[10,"class","controls"],[8],[0,"\\n    "],[1,[28,"ace-editor",null,[["content","mode"],[[24,["buffered","html"]],"html"]]],false],[0,"\\n  "],[9],[0,"\\n  "],[7,"div",true],[10,"class","controls"],[8],[0,"\\n    "],[1,[28,"d-button",null,[["action","disabled","class","label"],[[28,"action",[[23,0,[]],"save"],null],[24,["disableSave"]],"btn-primary","admin.adplugin.house_ads.save"]]],false],[0,"\\n\\n"],[4,"if",[[24,["saving"]]],null,{"statements":[[0,"      "],[1,[22,"savingStatus"],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["dirty"]]],null,{"statements":[[0,"        "],[7,"a",false],[12,"href",""],[3,"action",[[23,0,[]],"cancel"]],[8],[1,[28,"i18n",["cancel"],null],false],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"\\n    "],[1,[28,"d-button",null,[["action","class","label"],[[28,"action",[[23,0,[]],"destroy"],null],"btn-danger delete-button","admin.adplugin.house_ads.delete"]]],false],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/admin/plugins-house-ads-show"}}),Ember.TEMPLATES["javascripts/admin/plugins-house-ads-index"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-section",null,[["class"],["house-ads-settings content-body"]],{"statements":[[0,"  "],[7,"div",true],[8],[1,[28,"i18n",["admin.adplugin.house_ads.description"],null],false],[9],[0,"\\n\\n"],[4,"unless",[[24,["houseAds","length"]]],null,{"statements":[[0,"    "],[7,"p",true],[8],[0,"\\n"],[4,"link-to",null,[["route","model"],["adminPlugins.houseAds.show","new"]],{"statements":[[0,"        "],[1,[28,"i18n",["admin.adplugin.house_ads.get_started"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"form",true],[10,"class","form-horizontal"],[8],[0,"\\n      "],[1,[28,"house-ads-list-setting",null,[["name","value","allAds","adSettings"],["topic_list_top",[24,["adSettings","topic_list_top"]],[24,["houseAds"]],[24,["adSettings"]]]]],false],[0,"\\n      "],[1,[28,"house-ads-list-setting",null,[["name","value","allAds","adSettings"],["topic_above_post_stream",[24,["adSettings","topic_above_post_stream"]],[24,["houseAds"]],[24,["adSettings"]]]]],false],[0,"\\n      "],[1,[28,"house-ads-list-setting",null,[["name","value","allAds","adSettings"],["topic_above_suggested",[24,["adSettings","topic_above_suggested"]],[24,["houseAds"]],[24,["adSettings"]]]]],false],[0,"\\n      "],[1,[28,"house-ads-list-setting",null,[["name","value","allAds","adSettings"],["post_bottom",[24,["adSettings","post_bottom"]],[24,["houseAds"]],[24,["adSettings"]]]]],false],[0,"\\n\\n      "],[1,[28,"d-button",null,[["label","icon","class","action"],["admin.adplugin.house_ads.more_settings","cog","btn-default",[28,"route-action",["moreSettings"],null]]]],false],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/admin/plugins-house-ads-index"}}),define("discourse/plugins/discourse-adplugin/discourse/components/house-ads-chooser",["exports","select-kit/components/multi-select","@ember/object"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Ember.makeArray;e.default=t.default.extend({classNames:["house-ads-chooser"],filterable:!0,filterPlaceholder:"admin.adplugin.house_ads.filter_placeholder",tokenSeparator:"|",allowCreate:!1,allowAny:!1,settingValue:"",valueAttribute:null,nameProperty:null,value:(0,s.computed)("settingValue",function(){return this.settingValue.toString().split(this.tokenSeparator).filter(Boolean)}),mutateValues:function(e){this.set("settingValue",e.join(this.tokenSeparator))},computeValues:function(){return this.settingValue.split(this.tokenSeparator).filter(Boolean)},content:(0,s.computed)("choices",function(){return o(this.choices)}),actions:{onChange:function(e){var t=o(e).join(this.tokenSeparator);this.attrs.onChange&&this.attrs.onChange(t)}}})}),define("discourse/plugins/discourse-adplugin/discourse/components/google-adsense",["exports","discourse/plugins/discourse-adplugin/discourse/components/ad-component","discourse-common/utils/decorators","discourse/lib/load-script"],function(e,t,s,o){"use strict";function i(s,o,e,t,i){var a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(e,t){return t(s,o,e)||e},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(s,o,a),a=null),a}var a,n,r,l,d,u,c,p,_,g;Object.defineProperty(e,"__esModule",{value:!0});var m=!1,h=null,b={},f=Discourse.SiteSettings.adsense_publisher_code;var v={"topic-list-top":{code:"adsense_topic_list_top_code",sizes:"adsense_topic_list_top_ad_sizes"},"topic-above-post-stream":{code:"adsense_topic_above_post_stream_code",sizes:"adsense_topic_above_post_stream_ad_sizes"},"topic-above-suggested":{code:"adsense_topic_above_suggested_code",sizes:"adsense_topic_above_suggested_ad_sizes"},"post-bottom":{code:"adsense_post_bottom_code",sizes:"adsense_post_bottom_ad_sizes"}},w={"topic-list-top":{code:"adsense_mobile_topic_list_top_code",sizes:"adsense_mobile_topic_list_top_ad_size"},"topic-above-post-stream":{code:"adsense_mobile_topic_above_post_stream_code",sizes:"adsense_mobile_topic_above_post_stream_ad_size"},"topic-above-suggested":{code:"adsense_mobile_topic_above_suggested_code",sizes:"adsense_mobile_topic_above_suggested_ad_size"},"post-bottom":{code:"adsense_mobile_post_bottom_code",sizes:"adsense_mobile_post_bottom_ad_size"}};e.default=t.default.extend((a=(0,s.observes)("listLoading"),n=(0,s.default)("ad_width"),r=(0,s.default)("placement","showAd"),l=(0,s.default)("isResponsive"),d=(0,s.default)("ad_width","ad_height","isResponsive"),u=(0,s.default)("adWrapperStyle","isResponsive"),c=(0,s.default)("currentUser.trust_level"),p=(0,s.default)("showToTrustLevel","showToGroups","showAfterPost","showOnCurrentPage"),_=(0,s.default)("postNumber"),i(g={classNameBindings:[":google-adsense","classForSlot","isResponsive:adsense-responsive"],loadedGoogletag:!1,publisher_id:f,ad_width:null,ad_height:null,adRequested:!1,init:function(){var e=void 0,t=void 0,s=this.get("placement"),e=this.site.mobileView?w[s]:v[s];b[s]||(b[s]=0);var o=(this.siteSettings[e.sizes]||"").split("|");1===o.length?t=o[0]:(t=o[b[s]%o.length],b[s]+=1),this.set("ad_width",function(e){if("responsive"===e)return"auto";var t=parseInt(e.substring(0,3).trim(),10);return isNaN(t)?"auto":t+"px"}(t)),this.set("ad_height",function(e){if("responsive"===e)return"auto";var t=parseInt(e.substring(4,7).trim(),10);return isNaN(t)?"auto":t+"px"}(t)),this.set("ad_code",this.siteSettings[e.code]),this._super()},_triggerAds:function(){Ember.testing||(this.set("adRequested",!0),function(){if(m)return Ember.RSVP.resolve();if(h)return h;var e=("https:"===document.location.protocol?"https:":"http:")+"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";return h=(0,o.default)(e,{scriptTag:!0}).then(function(){m=!0})}().then(function(){var e=window.adsbygoogle||[];try{e.push({})}catch(e){}}))},didInsertElement:function(){this._super(),this.get("showAd")&&(this.get("listLoading")||Ember.run.scheduleOnce("afterRender",this,this._triggerAds))},waitForLoad:function(){this.get("adRequested")||this.get("listLoading")||Ember.run.scheduleOnce("afterRender",this,this._triggerAds)},isResponsive:function(e){return"auto"===e},classForSlot:function(e,t){return t?("adsense-"+e).htmlSafe():""},autoAdFormat:function(e){return!!e&&"auto".htmlSafe()},adWrapperStyle:function(e,t,s){return(s?"":"width: "+e+"; height: "+t+";").htmlSafe()},adInsStyle:function(e,t){return("display: "+(t?"block":"inline-block")+"; "+e).htmlSafe()},showToTrustLevel:function(e){return!(e&&e>this.siteSettings.adsense_through_trust_level)},showAd:function(e,t,s,o){return this.siteSettings.adsense_publisher_code&&e&&t&&s&&o},showAfterPost:function(e){return!e||this.isNthPost(parseInt(this.siteSettings.adsense_nth_post_code,10))}},"waitForLoad",[a],Object.getOwnPropertyDescriptor(g,"waitForLoad"),g),i(g,"isResponsive",[n],Object.getOwnPropertyDescriptor(g,"isResponsive"),g),i(g,"classForSlot",[r],Object.getOwnPropertyDescriptor(g,"classForSlot"),g),i(g,"autoAdFormat",[l],Object.getOwnPropertyDescriptor(g,"autoAdFormat"),g),i(g,"adWrapperStyle",[d],Object.getOwnPropertyDescriptor(g,"adWrapperStyle"),g),i(g,"adInsStyle",[u],Object.getOwnPropertyDescriptor(g,"adInsStyle"),g),i(g,"showToTrustLevel",[c],Object.getOwnPropertyDescriptor(g,"showToTrustLevel"),g),i(g,"showAd",[p],Object.getOwnPropertyDescriptor(g,"showAd"),g),i(g,"showAfterPost",[_],Object.getOwnPropertyDescriptor(g,"showAfterPost"),g),g))}),define("discourse/plugins/discourse-adplugin/discourse/components/house-ads-list-setting",["exports","discourse/plugins/discourse-adplugin/discourse/components/house-ads-setting"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({classNames:"house-ads-setting house-ads-list-setting",adNames:Ember.computed.mapBy("allAds","name")})}),define("discourse/plugins/discourse-adplugin/discourse/components/house-ads-setting",["exports","discourse/lib/ajax","discourse/lib/ajax-error","discourse/lib/computed"],function(e,t,s,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:"house-ads-setting",adValue:"",saving:!1,savingStatus:"",title:(0,o.i18n)("name","admin.adplugin.house_ads.%@.title"),help:(0,o.i18n)("name","admin.adplugin.house_ads.%@.description"),changed:(0,o.propertyNotEqual)("adValue","value"),init:function(){this._super.apply(this,arguments),this.set("adValue",this.get("value"))},actions:{save:function(){var e=this;this.get("saving")||(this.setProperties({saving:!0,savingStatus:I18n.t("saving")}),(0,t.ajax)("/admin/plugins/pluginad/house_settings/"+this.get("name")+".json",{type:"PUT",data:{value:this.get("adValue")}}).then(function(){e.get("adSettings").set(e.get("name"),e.get("adValue")),e.setProperties({value:e.get("adValue"),savingStatus:I18n.t("saved")})}).catch(s.popupAjaxError).finally(function(){e.setProperties({saving:!1,savingStatus:""})}))},cancel:function(){this.set("adValue",this.get("value"))}}})}),define("discourse/plugins/discourse-adplugin/discourse/components/house-ad",["exports","discourse/plugins/discourse-adplugin/discourse/components/ad-component","discourse-common/utils/decorators"],function(e,t,s){"use strict";function o(s,o,e,t,i){var a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(e,t){return t(s,o,e)||e},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(s,o,a),a=null),a}var i,a,n,r,l;Object.defineProperty(e,"__esModule",{value:!0});var d={topic_list_top:null,topic_above_post_stream:null,topic_above_suggested:null,post_bottom:null};e.default=t.default.extend((i=(0,s.default)("placement","showAd"),a=(0,s.default)("showToGroups","showAfterPost","showOnCurrentPage"),n=(0,s.default)("postNumber"),r=(0,s.observes)("refreshOnChange"),o(l={classNames:["house-creative"],classNameBindings:["adUnitClass"],adHtml:"",adUnitClass:function(e,t){return t?"house-"+e:""},showAd:function(e,t,s){return e&&t&&s},showAfterPost:function(e){return!e||this.isNthPost(parseInt(this.site.get("house_creatives.settings.after_nth_post"),10))},chooseAdHtml:function(){var e=this.site.get("house_creatives"),t=this.get("placement").replace(/-/g,"_"),s=this.adsNamesForSlot(t);if(0<s.length){d[t]||(d[t]=0);var o=e.creatives[s[d[t]]]||"";return d[t]=(d[t]+1)%s.length,o}return""},adsNamesForSlot:function(e){var t=this.site.get("house_creatives");if(!t||!t.settings)return[];var s=t.settings[e];return 0<Object.keys(t.creatives).length&&!Ember.isBlank(s)?s.split("|"):[]},refreshAd:function(){this.get("listLoading")||this.set("adHtml",this.chooseAdHtml())},didInsertElement:function(){var s=this;this._super.apply(this,arguments),this.get("showAd")&&(this.get("listLoading")||(null===d.topic_list_top&&Object.keys(d).forEach(function(e){var t=s.adsNamesForSlot(e);d[e]=Math.floor(Math.random()*t.length)}),this.refreshAd()))}},"adUnitClass",[i],Object.getOwnPropertyDescriptor(l,"adUnitClass"),l),o(l,"showAd",[a],Object.getOwnPropertyDescriptor(l,"showAd"),l),o(l,"showAfterPost",[n],Object.getOwnPropertyDescriptor(l,"showAfterPost"),l),o(l,"refreshAd",[r],Object.getOwnPropertyDescriptor(l,"refreshAd"),l),l))}),define("discourse/plugins/discourse-adplugin/discourse/components/google-dfp-ad",["exports","discourse/plugins/discourse-adplugin/discourse/components/ad-component","discourse-common/utils/decorators","discourse/lib/load-script"],function(e,t,s,o){"use strict";function i(s,o,e,t,i){var a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(e,t){return t(s,o,e)||e},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(s,o,a),a=null),a}var a,n,r,l,d,u,c,p,_,g,m,h;Object.defineProperty(e,"__esModule",{value:!0});var b=!1,f=null,v={},w=1,y={};function S(e){var t=e;return t=(t=t.replace(/['"]+/g,"")).split("\n")}var z={"topic-list-top":{code:"dfp_topic_list_top_code",sizes:"dfp_topic_list_top_ad_sizes",targeting_keys:"dfp_target_topic_list_top_key_code",targeting_values:"dfp_target_topic_list_top_value_code"},"topic-above-post-stream":{code:"dfp_topic_above_post_stream_code",sizes:"dfp_topic_above_post_stream_ad_sizes",targeting_keys:"dfp_target_topic_above_post_stream_key_code",targeting_values:"dfp_target_topic_above_post_stream_value_code"},"topic-above-suggested":{code:"dfp_topic_above_suggested_code",sizes:"dfp_topic_above_suggested_ad_sizes",targeting_keys:"dfp_target_topic_above_suggested_key_code",targeting_values:"dfp_target_topic_above_suggested_value_code"},"post-bottom":{code:"dfp_post_bottom_code",sizes:"dfp_post_bottom_ad_sizes",targeting_keys:"dfp_target_post_bottom_key_code",targeting_values:"dfp_target_post_bottom_value_code"}},P={"topic-list-top":{code:"dfp_mobile_topic_list_top_code",sizes:"dfp_mobile_topic_list_top_ad_sizes",targeting_keys:"dfp_target_topic_list_top_key_code",targeting_values:"dfp_target_topic_list_top_value_code"},"topic-above-post-stream":{code:"dfp_mobile_topic_above_post_stream_code",sizes:"dfp_mobile_topic_above_post_stream_ad_sizes",targeting_keys:"dfp_target_topic_above_post_stream_key_code",targeting_values:"dfp_target_topic_above_post_stream_value_code"},"topic-above-suggested":{code:"dfp_mobile_topic_above_suggested_code",sizes:"dfp_mobile_topic_above_suggested_ad_sizes",targeting_keys:"dfp_target_topic_above_suggested_key_code",targeting_values:"dfp_target_topic_above_suggested_value_code"},"post-bottom":{code:"dfp_mobile_post_bottom_code",sizes:"dfp_mobile_post_bottom_ad_sizes",targeting_keys:"dfp_target_post_bottom_key_code",targeting_values:"dfp_target_post_bottom_value_code"}};function O(e,t,s,o,i,a,n){if(s.dfp_publisher_id){if(v[e])return v[e];var r=void 0,l=void 0,d=void 0,l=o?(d=s.dfp_publisher_id_mobile||s.dfp_publisher_id,P[t]):(d=s.dfp_publisher_id,z[t]),r=window.googletag.defineSlot("/"+d+"/"+s[l.code],[i,a],e);return function(e,t,s){for(var o=0;o<e.length;o++)e[o]&&s.setTargeting(e[o],t[o].replace(/ /g,"").replace(/['"]+/g,"").split(","))}(S(s[l.targeting_keys]),S(s[l.targeting_values]),r),n&&r.setTargeting("discourse-category",n),r.addService(window.googletag.pubads()),v[e]={ad:r,width:i,height:a},v[e]}}e.default=t.default.extend((a=(0,s.default)("siteSettings.dfp_publisher_id","siteSettings.dfp_publisher_id_mobile","site.mobileView"),n=(0,s.default)("placement","postNumber"),r=(0,s.default)("placement","showAd"),l=(0,s.default)("width","height"),d=(0,s.default)("width"),u=(0,s.default)("publisherId","showToTrustLevel","showToGroups","showAfterPost","showOnCurrentPage","size"),c=(0,s.default)("currentUser.trust_level"),p=(0,s.default)("postNumber"),_=(0,s.on)("didUpdate"),g=(0,s.on)("didInsertElement"),m=(0,s.on)("willDestroyElement"),i(h={classNameBindings:["adUnitClass"],classNames:["google-dfp-ad"],loadedGoogletag:!1,refreshOnChange:null,lastAdRefresh:null,width:Ember.computed.alias("size.width"),height:Ember.computed.alias("size.height"),size:function(){return function(e,t,s){var o=void 0,i=void 0,o=s?P[e]:z[e];y[e]||(y[e]=0);var a=(t[o.sizes]||"").split("|");if(1===a.length?i=a[0]:(i=a[y[e]%a.length],y[e]+=1),"fluid"===i)return{width:"fluid",height:"fluid"};var n={width:parseInt(i.substring(0,3).trim(),10),height:parseInt(i.substring(4,7).trim(),10)};return isNaN(n.width)||isNaN(n.height)?void 0:n}(this.get("placement"),this.siteSettings,this.site.mobileView)},publisherId:function(e,t,s){return s&&t||e},divId:function(e,t){var s=w++;return t?"div-gpt-ad-"+s+"-"+e+"-"+t:"div-gpt-ad-"+s+"-"+e},adUnitClass:function(e,t){return t?"dfp-ad-"+e:""},adWrapperStyle:function(e,t){if("fluid"!==e)return("width: "+e+"px; height: "+t+"px;").htmlSafe()},adTitleStyleMobile:function(e){if("fluid"!==e)return("width: "+e+"px;").htmlSafe()},showAd:function(e,t,s,o,i,a){return e&&t&&s&&o&&i&&a},showToTrustLevel:function(e){return!(e&&e>this.siteSettings.dfp_through_trust_level)},showAfterPost:function(e){return!e||this.isNthPost(parseInt(this.siteSettings.dfp_nth_post_code,10))},shouldRefreshAd:function(){var e=this.get("lastAdRefresh");return!e||3e3<new Date-e},updated:function(){var e,t,s;this.get("listLoading")||!this.shouldRefreshAd()||(e=v[this.get("divId")])&&e.ad&&(t=e.ad,s=this.get("currentCategorySlug"),this.get("loadedGoogletag")&&(this.set("lastAdRefresh",new Date),window.googletag.cmd.push(function(){t.setTargeting("discourse-category",s||"0"),window.googletag.pubads().refresh([t])})))},_initGoogleDFP:function(){var t=this;Ember.testing||this.get("showAd")&&function(){if(b)return Ember.RSVP.resolve();if(f)return f;var e=("https:"===document.location.protocol?"https:":"http:")+"//securepubads.g.doubleclick.net/tag/js/gpt.js";return f=(0,o.default)(e,{scriptTag:!0}).then(function(){b=!0,void 0===window.googletag&&console.log("googletag is undefined!"),window.googletag.cmd.push(function(){window.googletag.pubads().enableSingleRequest(),window.googletag.pubads().disableInitialLoad(),window.googletag.enableServices()})}),window.googletag=window.googletag||{cmd:[]},f}(this.siteSettings).then(function(){t.set("loadedGoogletag",!0),t.set("lastAdRefresh",new Date),window.googletag.cmd.push(function(){var e=O(t.get("divId"),t.get("placement"),t.siteSettings,t.site.mobileView,t.get("width"),t.get("height"),t.get("currentCategorySlug")||"0");e&&e.ad&&(window.googletag.display(t.get("divId")),window.googletag.pubads().refresh([e.ad]))})})},willRender:function(){this._super.apply(this,arguments),this.get("showAd")},cleanup:function(){var e;e=this.get("divId"),v[e]&&window.googletag&&(window.googletag.destroySlots([v[e].ad]),delete v[e])}},"size",[s.default],Object.getOwnPropertyDescriptor(h,"size"),h),i(h,"publisherId",[a],Object.getOwnPropertyDescriptor(h,"publisherId"),h),i(h,"divId",[n],Object.getOwnPropertyDescriptor(h,"divId"),h),i(h,"adUnitClass",[r],Object.getOwnPropertyDescriptor(h,"adUnitClass"),h),i(h,"adWrapperStyle",[l],Object.getOwnPropertyDescriptor(h,"adWrapperStyle"),h),i(h,"adTitleStyleMobile",[d],Object.getOwnPropertyDescriptor(h,"adTitleStyleMobile"),h),i(h,"showAd",[u],Object.getOwnPropertyDescriptor(h,"showAd"),h),i(h,"showToTrustLevel",[c],Object.getOwnPropertyDescriptor(h,"showToTrustLevel"),h),i(h,"showAfterPost",[p],Object.getOwnPropertyDescriptor(h,"showAfterPost"),h),i(h,"updated",[_],Object.getOwnPropertyDescriptor(h,"updated"),h),i(h,"_initGoogleDFP",[g],Object.getOwnPropertyDescriptor(h,"_initGoogleDFP"),h),i(h,"cleanup",[m],Object.getOwnPropertyDescriptor(h,"cleanup"),h),h))}),define("discourse/plugins/discourse-adplugin/discourse/components/carbonads-ad",["exports","discourse/plugins/discourse-adplugin/discourse/components/ad-component","discourse-common/utils/decorators"],function(e,t,s){"use strict";function o(s,o,e,t,i){var a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(e,t){return t(s,o,e)||e},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(s,o,a),a=null),a}var i,a,n,r;Object.defineProperty(e,"__esModule",{value:!0});var l=Discourse.SiteSettings.carbonads_serve_id,d=Discourse.SiteSettings.carbonads_placement;e.default=t.default.extend((i=(0,s.default)("serve_id"),a=(0,s.default)("currentUser.trust_level"),n=(0,s.default)("showToTrustLevel","showToGroups","showOnCurrentPage"),o(r={init:function(){this.set("serve_id",l),this._super()},url:function(e){return("//cdn.carbonads.com/carbon.js?serve="+e+"&placement="+d).htmlSafe()},showToTrustLevel:function(e){return!(e&&e>Discourse.SiteSettings.carbonads_through_trust_level)},showAd:function(e,t,s){return d&&l&&e&&t&&s}},"url",[i],Object.getOwnPropertyDescriptor(r,"url"),r),o(r,"showToTrustLevel",[a],Object.getOwnPropertyDescriptor(r,"showToTrustLevel"),r),o(r,"showAd",[n],Object.getOwnPropertyDescriptor(r,"showAd"),r),r))}),define("discourse/plugins/discourse-adplugin/discourse/components/ad-slot",["exports","discourse/plugins/discourse-adplugin/discourse/components/ad-component","discourse-common/utils/decorators"],function(e,t,s){"use strict";function o(s,o,e,t,i){var a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(e,t){return t(s,o,e)||e},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(s,o,a),a=null),a}var i,a,n,r;Object.defineProperty(e,"__esModule",{value:!0});var d=Ember.Object.create({"google-adsense":{settingPrefix:"adsense",enabledSetting:"adsense_publisher_code",nthPost:"adsense_nth_post_code"},"google-dfp-ad":{settingPrefix:"dfp",enabledSetting:"dfp_publisher_id",nthPost:"dfp_nth_post_code"},"amazon-product-links":{settingPrefix:"amazon",enabledSetting:!1,nthPost:"amazon_nth_post_code",desktop:{"topic-list-top":"amazon_topic_list_top_src_code","post-bottom":"amazon_post_bottom_src_code","topic-above-post-stream":"amazon_topic_above_post_stream_src_code","topic-above-suggested":"amazon_topic_above_suggested_src_code"},mobile:{"topic-list-top":"amazon_mobile_topic_list_top_src_code","post-bottom":"amazon_mobile_post_bottom_src_code","topic-above-post-stream":"amazon_mobile_topic_above_post_stream_src_code","topic-above-suggested":"amazon_mobile_topic_above_suggested_src_code"}},"carbonads-ad":{settingPrefix:"carbonads",enabledSetting:"carbonads_serve_id",desktop:{"topic-list-top":"carbonads_topic_list_top_enabled","post-bottom":!1,"topic-above-post-stream":"carbonads_above_post_stream_enabled","topic-above-suggested":!1}},"adbutler-ad":{settingPrefix:"adbutler",enabledSetting:"adbutler_publisher_id",desktop:{"topic-list-top":"adbutler_topic_list_top_zone_id","post-bottom":"adbutler_post_bottom_zone_id","topic-above-post-stream":"adbutler_topic_above_post_stream_zone_id","topic-above-suggested":"adbutler_topic_above_suggested_zone_id"},mobile:{"topic-list-top":"adbutler_mobile_topic_list_top_zone_id","post-bottom":"adbutler_mobile_post_bottom_zone_id","topic-above-post-stream":"adbutler_mobile_topic_above_post_stream_zone_id","topic-above-suggested":"adbutler_mobile_topic_above_suggested_zone_id"}}}),l={houseAds:0,allAds:0};e.default=t.default.extend((i=(0,s.default)("placement","postNumber"),a=(0,s.observes)("refreshOnChange"),n=(0,s.default)("placement","availableAdTypes","needsUpdate"),o(r={needsUpdate:!1,availableAdTypes:function(i,a){var e,n=this,r=[],t=this.site.get("house_creatives"),l=i.replace(/-/g,"_");return t&&t.settings&&(e=t.settings[l],0<Object.keys(t.creatives).length&&!Ember.isBlank(e)&&(!a||this.isNthPost(parseInt(t.settings.after_nth_post,10)))&&r.push("house-ad")),Object.keys(d).forEach(function(e){var t=d[e],s=null,o=void 0;(!t.enabledSetting||Ember.isBlank(n.siteSettings[t.enabledSetting]))&&!1!==t.enabledSetting||a&&t.nthPost&&!n.isNthPost(parseInt(n.siteSettings[t.nthPost],10))||((s=n.site.mobileView&&t.mobile||t.desktop)&&(o=s[i]),void 0===o&&(o=t.settingPrefix+"_"+(n.site.mobileView?"mobile_":"")+l+"_code"),!1===o||!1===n.siteSettings[o]||Ember.isBlank(n.siteSettings[o])||r.push(e))}),r},changed:function(){this.get("listLoading")||this.notifyPropertyChange("needsUpdate")},adComponents:function(e,t){if(!t.includes("house-ad")||1===t.length)return t;var s=this.site.get("house_creatives"),o=!1;if(100===s.settings.house_ads_frequency)return["house-ad"];if(0<s.settings.house_ads_frequency){if(0===l.allAds||100*l.houseAds/l.allAds<s.settings.house_ads_frequency)return l.houseAds+=1,l.allAds+=1,["house-ad"];o=!0}var i=t.filter(function(e){return"house-ad"!==e});return o&&(l.allAds+=i.length),i}},"availableAdTypes",[i],Object.getOwnPropertyDescriptor(r,"availableAdTypes"),r),o(r,"changed",[a],Object.getOwnPropertyDescriptor(r,"changed"),r),o(r,"adComponents",[n],Object.getOwnPropertyDescriptor(r,"adComponents"),r),r))}),define("discourse/plugins/discourse-adplugin/discourse/components/adbutler-ad",["exports","discourse/plugins/discourse-adplugin/discourse/components/ad-component","discourse-common/utils/decorators","discourse/lib/load-script"],function(e,t,s,o){"use strict";function i(s,o,e,t,i){var a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(e,t){return t(s,o,e)||e},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(s,o,a),a=null),a}var a,n,r,l,d;Object.defineProperty(e,"__esModule",{value:!0});var u=Discourse.SiteSettings.adbutler_publisher_id,c=Discourse.SiteSettings.adbutler_adserver_hostname,p=!1,_=null,g=0;e.default=t.default.extend((a=(0,s.observes)("listLoading"),n=(0,s.default)("currentUser.trust_level"),r=(0,s.default)("showToTrustLevel","showToGroups","showAfterPost","showOnCurrentPage"),l=(0,s.default)("postNumber"),i(d={divs:null,init:function(){var e=[728,90],t="adbutler_",s="adbutler-",o="adbutler-ad";this.set("divs",[]),this.site.mobileView&&(e=[320,50],t+="mobile_",s+="mobile-",o="adbutler-mobile-ad"),t+=this.get("placement").replace(/-/g,"_")+"_zone_id",this.set("configKey",t),s+=this.get("placement"),this.set("className",s+" "+o);var i=this.siteSettings[t];this.set("zoneId",i);var a="placement-"+i+"-"+g;this.set("divId",a),g++,this.divs.push({divId:a,publisherId:u,zoneId:i,dimensions:e}),this.set("publisherId",u),this._super()},_triggerAds:function(){Ember.testing||(p?Ember.RSVP.resolve():_=_||(0,o.default)("https://"+c+"/app.js",{scriptTag:!0}).then(function(){p=!0})).then(function(){var e;0<this.divs.length&&(e=window.abkw||"",window.AdButler.ads.push({handler:function(e){window.AdButler.register(e.place.publisherId,e.place.zoneId,e.place.dimensions,e.place.divId,e)},opt:{place:this.divs.pop(),keywords:e,domain:c,click:"CLICK_MACRO_PLACEHOLDER"}}))}.bind(this))},didInsertElement:function(){this._super(),Ember.run.scheduleOnce("afterRender",this,this._triggerAds)},waitForLoad:function(){this.get("adRequested")||this.get("listLoading")||Ember.run.scheduleOnce("afterRender",this,this._triggerAds)},showToTrustLevel:function(e){return!(e&&e>Discourse.SiteSettings.adbutler_through_trust_level)},showAd:function(e,t,s,o){return u&&e&&t&&s&&o},showAfterPost:function(e){return!e||this.isNthPost(parseInt(this.siteSettings.adbutler_nth_post,10))}},"waitForLoad",[a],Object.getOwnPropertyDescriptor(d,"waitForLoad"),d),i(d,"showToTrustLevel",[n],Object.getOwnPropertyDescriptor(d,"showToTrustLevel"),d),i(d,"showAd",[r],Object.getOwnPropertyDescriptor(d,"showAd"),d),i(d,"showAfterPost",[l],Object.getOwnPropertyDescriptor(d,"showAfterPost"),d),d))}),define("discourse/plugins/discourse-adplugin/discourse/components/amazon-product-links",["exports","discourse/plugins/discourse-adplugin/discourse/components/ad-component","discourse-common/utils/decorators"],function(e,t,s){"use strict";function o(s,o,e,t,i){var a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(e,t){return t(s,o,e)||e},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(s,o,a),a=null),a}var i,a,n,r,l,d,u,c;Object.defineProperty(e,"__esModule",{value:!0});var p={"topic-list-top":{},"topic-above-post-stream":{},"topic-above-suggested":{},"post-bottom":{}},_=Discourse.Site.currentProp("mobileView");!_&&Discourse.SiteSettings.amazon_topic_list_top_src_code&&(p["topic-list-top"].user_input=Discourse.SiteSettings.amazon_topic_list_top_src_code,p["topic-list-top"].amazon_width=parseInt(Discourse.SiteSettings.amazon_topic_list_top_ad_width_code,10),p["topic-list-top"].amazon_height=parseInt(Discourse.SiteSettings.amazon_topic_list_top_ad_height_code,10)),_&&Discourse.SiteSettings.amazon_mobile_topic_list_top_src_code&&(p["topic-list-top"].user_input_mobile=Discourse.SiteSettings.amazon_mobile_topic_list_top_src_code,p["topic-list-top"].mobile_amazon_width=parseInt(Discourse.SiteSettings.amazon_mobile_topic_list_top_ad_width_code,10),p["topic-list-top"].mobile_amazon_height=parseInt(Discourse.SiteSettings.amazon_mobile_topic_list_top_ad_height_code,10)),!_&&Discourse.SiteSettings.amazon_topic_above_post_stream_src_code&&(p["topic-above-post-stream"].user_input=Discourse.SiteSettings.amazon_topic_above_post_stream_src_code,p["topic-above-post-stream"].amazon_width=parseInt(Discourse.SiteSettings.amazon_topic_above_post_stream_ad_width_code,10),p["topic-above-post-stream"].amazon_height=parseInt(Discourse.SiteSettings.amazon_topic_above_post_stream_ad_height_code,10)),_&&Discourse.SiteSettings.amazon_mobile_topic_above_post_stream_src_code&&(p["topic-above-post-stream"].user_input_mobile=Discourse.SiteSettings.amazon_mobile_topic_above_post_stream_src_code,p["topic-above-post-stream"].mobile_amazon_width=parseInt(Discourse.SiteSettings.amazon_mobile_topic_above_post_stream_ad_width_code,10),p["topic-above-post-stream"].mobile_amazon_height=parseInt(Discourse.SiteSettings.amazon_mobile_topic_above_post_stream_ad_height_code,10)),!_&&Discourse.SiteSettings.amazon_topic_above_suggested_src_code&&(p["topic-above-suggested"].user_input=Discourse.SiteSettings.amazon_topic_above_suggested_src_code,p["topic-above-suggested"].amazon_width=parseInt(Discourse.SiteSettings.amazon_topic_above_suggested_ad_width_code,10),p["topic-above-suggested"].amazon_height=parseInt(Discourse.SiteSettings.amazon_topic_above_suggested_ad_height_code,10)),_&&Discourse.SiteSettings.amazon_mobile_topic_above_suggested_src_code&&(p["topic-above-suggested"].user_input_mobile=Discourse.SiteSettings.amazon_mobile_topic_above_suggested_src_code,p["topic-above-suggested"].mobile_amazon_width=parseInt(Discourse.SiteSettings.amazon_mobile_topic_above_suggested_ad_width_code,10),p["topic-above-suggested"].mobile_amazon_height=parseInt(Discourse.SiteSettings.amazon_mobile_topic_above_suggested_ad_height_code,10)),!_&&Discourse.SiteSettings.amazon_post_bottom_src_code&&(p["post-bottom"].user_input=Discourse.SiteSettings.amazon_post_bottom_src_code,p["post-bottom"].amazon_width=parseInt(Discourse.SiteSettings.amazon_post_bottom_ad_width_code,10),p["post-bottom"].amazon_height=parseInt(Discourse.SiteSettings.amazon_post_bottom_ad_height_code,10)),_&&Discourse.SiteSettings.amazon_mobile_post_bottom_src_code&&(p["post-bottom"].user_input_mobile=Discourse.SiteSettings.amazon_mobile_post_bottom_src_code,p["post-bottom"].mobile_amazon_width=parseInt(Discourse.SiteSettings.amazon_mobile_post_bottom_ad_width_code,10),p["post-bottom"].mobile_amazon_height=parseInt(Discourse.SiteSettings.amazon_mobile_post_bottom_ad_height_code,10)),e.default=t.default.extend((i=(0,s.default)("amazon_width","amazon_height"),a=(0,s.default)("mobile_amazon_width","mobile_amazon_height"),n=(0,s.default)("mobile_amazon_width"),r=(0,s.default)("user_input"),l=(0,s.default)("user_input_mobile"),d=(0,s.default)("currentUser.trust_level"),u=(0,s.default)("postNumber"),o(c={classNames:["amazon-product-links"],showAd:Ember.computed.and("showToTrustLevel","showToGroups","showAfterPost","showOnCurrentPage"),init:function(){var e=this.get("placement");this.set("user_input",p[e].user_input),this.set("amazon_width",p[e].amazon_width),this.set("amazon_height",p[e].amazon_height),this.set("user_input_mobile",p[e].user_input_mobile),this.set("mobile_amazon_height",p[e].mobile_amazon_height),this.set("mobile_amazon_width",p[e].mobile_amazon_width),this._super()},adWrapperStyle:function(e,t){return("width: "+e+"px; height: "+t+"px;").htmlSafe()},adWrapperStyleMobile:function(e,t){return("width: "+e+"px; height: "+t+"px;").htmlSafe()},adTitleStyleMobile:function(e){return("width: "+e+"px;").htmlSafe()},userInput:function(e){return(""+e).htmlSafe()},userInputMobile:function(e){return(""+e).htmlSafe()},showToTrustLevel:function(e){return!(e&&e>Discourse.SiteSettings.amazon_through_trust_level)},showAfterPost:function(e){return!e||this.isNthPost(parseInt(this.siteSettings.amazon_nth_post_code,10))}},"adWrapperStyle",[i],Object.getOwnPropertyDescriptor(c,"adWrapperStyle"),c),o(c,"adWrapperStyleMobile",[a],Object.getOwnPropertyDescriptor(c,"adWrapperStyleMobile"),c),o(c,"adTitleStyleMobile",[n],Object.getOwnPropertyDescriptor(c,"adTitleStyleMobile"),c),o(c,"userInput",[r],Object.getOwnPropertyDescriptor(c,"userInput"),c),o(c,"userInputMobile",[l],Object.getOwnPropertyDescriptor(c,"userInputMobile"),c),o(c,"showToTrustLevel",[d],Object.getOwnPropertyDescriptor(c,"showToTrustLevel"),c),o(c,"showAfterPost",[u],Object.getOwnPropertyDescriptor(c,"showAfterPost"),c),c))}),define("discourse/plugins/discourse-adplugin/discourse/components/ad-component",["exports","discourse-common/utils/decorators"],function(e,t){"use strict";function s(s,o,e,t,i){var a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(e,t){return t(s,o,e)||e},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(s,o,a),a=null),a}var o,i,a,n,r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend((o=(0,t.default)("router.currentRoute.attributes.__type","router.currentRoute.attributes.id"),i=(0,t.default)("router.currentRoute.parent.attributes.archetype"),a=(0,t.default)("currentUser.groups"),n=(0,t.default)("currentCategoryId","topicTagsDisableAds","topicListTag","isPersonalMessage","isRestrictedCategory"),s(r={router:Ember.inject.service(),currentCategoryId:Ember.computed.or("router.currentRoute.attributes.category.id","router.currentRoute.parent.attributes.category_id"),currentCategorySlug:Ember.computed.or("router.currentRoute.attributes.category.slug","router.currentRoute.parent.attributes.category.slug"),topicTagsDisableAds:Ember.computed.alias("router.currentRoute.parent.attributes.tags_disable_ads"),isRestrictedCategory:Ember.computed.or("router.currentRoute.attributes.category.read_restricted","router.currentRoute.parent.attributes.category.read_restricted"),topicListTag:function(e,t){if("tag"===e&&t)return t},isPersonalMessage:function(e){return"private_message"===e},showToGroups:function(e){if(!this.currentUser||!e||!this.siteSettings.no_ads_for_groups||0===this.siteSettings.no_ads_for_groups.length)return!0;var t=this.siteSettings.no_ads_for_groups.split("|").filter(Boolean);return!e.map(function(e){return e.id.toString()}).any(function(e){return t.includes(e)})},showOnCurrentPage:function(e,t,s,o,i){return!(t||e&&this.siteSettings.no_ads_for_categories&&this.siteSettings.no_ads_for_categories.split("|").includes(e.toString())||s&&this.siteSettings.no_ads_for_tags&&this.siteSettings.no_ads_for_tags.split("|").includes(s)||o&&this.siteSettings.no_ads_for_personal_messages||i&&this.siteSettings.no_ads_for_restricted_categories)},isNthPost:function(e){return!!(e&&0<e)&&this.get("postNumber")%e==0}},"topicListTag",[o],Object.getOwnPropertyDescriptor(r,"topicListTag"),r),s(r,"isPersonalMessage",[i],Object.getOwnPropertyDescriptor(r,"isPersonalMessage"),r),s(r,"showToGroups",[a],Object.getOwnPropertyDescriptor(r,"showToGroups"),r),s(r,"showOnCurrentPage",[n],Object.getOwnPropertyDescriptor(r,"showOnCurrentPage"),r),r))}),define("discourse/plugins/discourse-adplugin/discourse/adplugin-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"admin.adminPlugins",path:"/plugins",map:function(){this.route("houseAds",{path:"/pluginad/house_creatives"},function(){this.route("index",{path:"/"}),this.route("show",{path:"/:ad_id"})})}}}),define("discourse/plugins/discourse-adplugin/discourse/controllers/admin-plugins-house-ads",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({loadingAds:!0})}),define("discourse/plugins/discourse-adplugin/discourse/controllers/admin-plugins-house-ads-show",["exports","discourse/lib/ajax","discourse/lib/ajax-error","discourse/lib/computed","discourse/mixins/buffered-content"],function(e,a,s,t,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend((0,o.bufferedProperty)("model"),{adminPluginsHouseAds:Ember.inject.controller("adminPlugins.houseAds"),saving:!1,savingStatus:"",nameDirty:(0,t.propertyNotEqual)("buffered.name","model.name"),htmlDirty:(0,t.propertyNotEqual)("buffered.html","model.html"),dirty:Ember.computed.or("nameDirty","htmlDirty"),disableSave:Ember.computed.not("dirty"),actions:{save:function(){var e,t,o,i=this;this.get("saving")||(this.setProperties({saving:!0,savingStatus:I18n.t("saving")}),e={},t=this.get("buffered"),(o=!t.get("id"))||(e.id=t.get("id")),e.name=t.get("name"),e.html=t.get("html"),(0,a.ajax)(o?"/admin/plugins/pluginad/house_creatives":"/admin/plugins/pluginad/house_creatives/"+t.get("id"),{type:o?"POST":"PUT",data:e}).then(function(e){var t,s;i.commitBuffer(),i.set("savingStatus",I18n.t("saved")),o&&((t=i.get("model")).set("id",e.house_ad.id),(s=i.get("adminPluginsHouseAds.model")).includes(t)||s.pushObject(t),i.transitionToRoute("adminPlugins.houseAds.show",t.get("id")))}).catch(s.popupAjaxError).finally(function(){i.setProperties({saving:!1,savingStatus:""})}))},cancel:function(){this.rollbackBuffer()},destroy:function(){var e=this,t=this.get("adminPluginsHouseAds.model"),s=this.get("model");s.get("id")?(0,a.ajax)("/admin/plugins/pluginad/house_creatives/"+s.get("id"),{type:"DELETE"}).then(function(){t.removeObject(s),e.transitionToRoute("adminPlugins.houseAds.index")}).catch(function(){return bootbox.alert(I18n.t("generic_error"))}):this.transitionToRoute("adminPlugins.houseAds.index")}}})}),define("discourse/plugins/discourse-adplugin/discourse/controllers/admin-plugins-house-ads-index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({adminPluginsHouseAds:Ember.inject.controller("adminPlugins.houseAds"),houseAds:Ember.computed.alias("adminPluginsHouseAds.model"),adSettings:Ember.computed.alias("adminPluginsHouseAds.houseAdsSettings")})}),define("discourse/plugins/discourse-adplugin/discourse/routes/admin-plugins-house-ads",["exports","discourse/lib/ajax","discourse/routes/discourse"],function(e,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({settings:null,model:function(){var t=this;return(0,s.ajax)("/admin/plugins/pluginad/house_creatives.json").then(function(e){return t.set("settings",Ember.Object.create(e.settings)),e.house_ads.map(function(e){return Ember.Object.create(e)})})},setupController:function(e,t){e.setProperties({model:t,houseAdsSettings:this.get("settings"),loadingAds:!1})}})}),define("discourse/plugins/discourse-adplugin/discourse/routes/admin-plugins-house-ads-show",["exports","discourse/routes/discourse"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({model:function(e){return"new"===e.ad_id?Ember.Object.create({name:I18n.t("admin.adplugin.house_ads.new_name"),html:""}):this.modelFor("adminPlugins.houseAds").findBy("id",parseInt(e.ad_id,10))}})}),define("discourse/plugins/discourse-adplugin/discourse/routes/admin-plugins-house-ads-index",["exports","discourse/routes/discourse"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({actions:{moreSettings:function(){this.transitionTo("adminSiteSettingsCategory","ad_plugin")}}})});
//# sourceMappingURL=https://sjc3.discourse-cdn.com/business7/assets/plugins/discourse-adplugin-e03b6cbdccc294f17555dba70fd7fad17b3512ee7abb03876ac6deb9b4c1f7d7.js.map